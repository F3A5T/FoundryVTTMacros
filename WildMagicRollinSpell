dnd5e.documents.macro.rollItem("Magic Missile")

//creating the dialog options//////////////////////////////////
let levels = Array.from("123456789");
let dialogOptions = levels.reduce((acc, lvl) => acc += `<option value='${lvl}'> Spell of caster level ${lvl} </options> `, ``);
///////////////////////////////////////////////////////////////
let resource = duplicate(actor.data.data.resources.secondary.value);
let content = `<select name="spellLevel">${dialogOptions}</select>`;
new Dialog({
    title: "Roll for Wild Magic Surge possibility",
    content,
    buttons: {
        roll: {
            label: "Roll!",
            callback: async (html) => 
            {
                let spellLevel = parseInt(html.find("[name=spellLevel]")[0].value);
                let roll = new Roll("1d8").evaluate({async: false});
                if(roll.total == spellLevel)
                {
                    let wildMagicRoll = new Roll("1d100").evaluate({async: false});
                    wildMagic.toMessage({rollMode: 'wildMagicRoll', speaker: {alias: name}});
                    ChatMessage.create({content: "Wild Magic Surges after you cast this spell ... something happens..."})

                    switch (true) // this could look up a JS map or array or something. I don't know JS that well
                    {
                    case (wildMagicRoll.total < 3):
                        ChatMessage.create({content: "Roll on this table at the start of each of your turns for the next minute, ignoring this result on subsequent rolls."});
                        break;
                    case (wildMagicRoll.total < 6):
                        ChatMessage.create({content: "You manifest magic missile at 5th-level."});
                        break;
                    case (wildMagicRoll.total < 9):
                        let float = new Roll("1d10").evaluate({async: false});
                        var floatString = `You float ${float.total} inches off the ground for the next hour.`
                        ChatMessage.create({content: floatString });
                        break;
                    case (wildMagicRoll.total < 12):
                        ChatMessage.create({content: "You teleport to a random unoccupied space within 60 feet."});
                        break;
                    case (wildMagicRoll.total < 15):
                        ChatMessage.create({content: "You can speak only in Deep Speech for the next minute"});
                        break;
                    case (wildMagicRoll.total < 18):
                        let tempHP = new Roll("1d10").evaluate({async: false});
                        var tempHPString = `You gain ${tempHP.total} temporary hit points.`
                        ChatMessage.create({content: tempHPString });
                        break;
                    case (wildMagicRoll.total < 21):
                        ChatMessage.create({content: "You leave footprints that glow with an otherworldly light for the next hour."});
                        break;
                    case (wildMagicRoll.total < 24):
                        ChatMessage.create({content: "Your jump distance is tripled for 1 minute."});
                        break;
                    case (wildMagicRoll.total < 27):
                        ChatMessage.create({content: "You manifest disguise self, taking on the appearance of the nearest humanoid."});
                        break;
                    case (wildMagicRoll.total < 30):
                        ChatMessage.create({content: "You manifest levitate on yourself. This spell does not require concentration."});
                        dnd5e.documents.macro.rollItem("Levitate");
                        break;
                    case (wildMagicRoll.total < 33):
                        ChatMessage.create({content: "Your skin becomes translucent for 1 minute."});
                        break;
                    case (wildMagicRoll.total < 36):
                        ChatMessage.create({content: "For the next minute, you can see into the Ethereal Plane out to a 30-foot radius."});
                        break;
                    case (wildMagicRoll.total < 39):
                        ChatMessage.create({content: "You loose all distinctive features and appear as an average person of your race."});
                        break;
                    case (wildMagicRoll.total < 42):
                        ChatMessage.create({content: "You emit light in a 10-footradius for 1 minute."});
                        break;
                    case (wildMagicRoll.total < 45):
                        ChatMessage.create({content: "You briefly see a fond childhood memory of a random creature within 60 feet."});
                        break;
                    case (wildMagicRoll.total < 48):
                        ChatMessage.create({content: "You are proficient in all skills for 1 minute."});
                        break;
                    case (wildMagicRoll.total < 51):
                        ChatMessage.create({content: "You regain expended Psi Points equal to your Intelligence modifier."});
                        break;
                    case (wildMagicRoll.total < 54):
                        ChatMessage.create({content: "Up to three creatures you choose within 30 feet of you take 4d10 psychic damage."});
                        break;
                    case (wildMagicRoll.total < 57):
                        ChatMessage.create({content: "You regain all expended Hit Dice."});
                        break;
                    case (wildMagicRoll.total < 60):
                        ChatMessage.create({content: "Your Strength score becomes 4 for 1 minute."});
                        break;
                    case (wildMagicRoll.total < 63):
                        ChatMessage.create({content: "You regain all expended Hit Dice."});
                        break;
                    case (wildMagicRoll.total < 66):
                        ChatMessage.create({content: "You manifest sleep at the level of the spell that triggered this surge targeting yourself."});
                        dnd5e.documents.macro.rollItem("Sleep");
                        break;
                    case (wildMagicRoll.total < 69):
                        ChatMessage.create({content: "You manifest confusion targeting yourself. This spell does not require concentration.."});
                        dnd5e.documents.macro.rollItem("Confusion");
                        break;
                    case (wildMagicRoll.total < 72):
                        ChatMessage.create({content: "You manifest grease centered on yourself."});
                        dnd5e.documents.macro.rollItem("Grease");
                        break;
                    case (wildMagicRoll.total < 75):
                        ChatMessage.create({content: "You are frightened by the nearest creature until the end of your next turn.."});
                        break;
                    case (wildMagicRoll.total < 78):
                        ChatMessage.create({content: "You resist all damage for the next minute."});
                        break;
                    case (wildMagicRoll.total < 81):
                        ChatMessage.create({content: "You manifest hypnotic pattern centered on you. This spell does not require concentration."});
                        dnd5e.documents.macro.rollItem("Hypnotic Pattern");
                        break;
                    case (wildMagicRoll.total < 84):
                        ChatMessage.create({content: "For the next minute, you regain 5 Psi Points at the start of each of your turns."});
                        break;
                    case (wildMagicRoll.total < 87):
                        ChatMessage.create({content: "You can immediately take one extra action."});
                        break;
                    case (wildMagicRoll.total < 90):
                        ChatMessage.create({content: "You manifest fly on a random creature within 60 feet. It must concentrate on this effect."});
                        dnd5e.documents.macro.rollItem("Fly");
                        break;
                    case (wildMagicRoll.total < 93):
                        ChatMessage.create({content: "Maximize the damage of the next spell you manifest within the next minute."});
                        break;
                    case (wildMagicRoll.total < 96):
                        ChatMessage.create({content: "For the next minute, you can teleport up to 20 feet as a bonus action."});
                        break;
                    case (wildMagicRoll.total < 99):
                        ChatMessage.create({content: "You manifest invisibility targeting yourself. This spell doesn't require your concentration."});
                        dnd5e.documents.macro.rollItem("Invisibility");
                        break;
                    case (wildMagicRoll.total < 101):
                        ChatMessage.create({content: "You regain all expended Psi Points."});
                        break;
                    }
                }
            }
        }
    }
},
{
   width: 250
}).render(true)
